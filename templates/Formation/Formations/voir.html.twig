{% extends "Formation/layout.html.twig" %}

{% block content_title %}
    {{ formation.titre }}
{% endblock %}

{% block breadcrumb_active %}
    {{ formation.titre }}
{% endblock %}

{% block content_bundle %}
    <table class="table table-bordered table-striped">
        <tr>
            <th>titre</th>
            <th>date</th>
            <th>supre</th>
            <th>date</th>
            <th>supre</th>
        </tr>
        <tr>
            <td>{{ formation.dateDebut | date("d/m/Y") }}</td>
            <td>{{ formation.titre | title }}</td>
            <td>{{ formation.description }}</td>
            <td>{% for membre in formation.formateurs %} {{ membre.prenomNom }};{% endfor %}</td>
            <td>{{ (formation.dateFin | date("U") - formation.dateDebut | date("U")) / 60 }} {{ 'formation.minutes'|trans({}, 'formation') }}</td>
        </tr>
    </table>
    <br/>
    <div class="row">
        {% if is_granted('ROLE_CA') %}
            <div class="col-md-2 col-xs-4">
                <a href="{{ path('formation_modifier', {'id': formation.id}) }}" class="btn btn-primary">
                    {{ 'formation.formation_modifier'|trans({}, 'formation') }}
                </a>
            </div>
        {% endif %}
        <div class="col-md-2 col-xs-4">
            <button class="btn btn-success">{{ 'formation.documents_telecharger'|trans({}, 'formation') }}</button>
        </div>
    </div>

    <table class="table table-bordered table-striped">
        <tr>
            <th>titre</th>
            <th>date</th>
            <th>supre</th>

        </tr>

        {% for relatedDocument in formation.relatedDocuments %}
        {% set doc = relatedDocument.document %}
        <tr>
            <td><a href="{{ path('publish_document_voir', {'id': doc.id}) }} ">{{ doc.name}}</a></td>
            <td>{{ doc.uptime ? doc.uptime | date('d/m/Y - H:i:s')}}</td>
            {# {% if is_granted('ROLE_CA') %} #}
            <td><form class="bootbox-confirm inline"
                    data-content="{{ 'processus.supprimer_doc_confirm'|trans({}, 'processus') }}"
                    action="{{ path('publish_document_delete', { 'id': doc.id}) }}" method="post">
                <button class="fa fa-times"></button>
                </form> </td>
            {# {% endif %} #}
        </tr>
        {% endfor %}
    </table>
    
    <div class="box-footer with-border">
            <a href="{{ path('publish_document_uploadFormation',{'id': formation.id}) }}" class="pull-right btn btn-info">{{ 'processus.ajouter_doc'|trans({}, 'processus') }}</a>
    </div>
{% endblock %}
